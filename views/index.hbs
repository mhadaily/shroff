<h1>{{title}}</h1><!--Async data will be manipulated here-->
<div id="data">
    <div class="mdl-grid"></div>
</div>

<script src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script>
    $.ajax('http://localhost:3030/api/v1/segment').then((res) => {
        res.map(segment => {
            $.getJSON("http://localhost:3030/api/v1/segment/" + segment._id, function (data) {
                let items = null;
                let currencies = data[0].currencyList[0];

                items = `<div class="mdl-cell mdl-cell--4-col"><h3>${segment.name}</h3>`;
                items += `<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">`;
                items += `<thead><tr><th class="mdl-data-table__cell--non-numeric">NAME</th><th class="mdl-data-table__cell--non-numeric">BUY</th><th class="mdl-data-table__cell--non-numeric">SELL</th></tr></thead>`;
                $.each(currencies, function (name, values) {
                    items += `<tr><td id='${name}' class="mdl-data-table__cell--non-numeric"><strong>${name}</strong></td><td>${values.buy}</td><td>${values.sell}</td></tr>`;
                });
                items += `</table></div>`;
                $('#data .mdl-grid').append(items);
            });
        })
    });
</script>